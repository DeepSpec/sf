<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="common/css/sf.css" rel="stylesheet" type="text/css" />
<title>Maps: Total and Partial Maps</title>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/vfa.css" rel="stylesheet" type="text/css"/>
</head>

<body>

<div id="page">

<div id="header">
<div id='logoinheader'><a href='https://softwarefoundations.cis.upenn.edu'>
<img src='common/media/image/sf_logo_sm.png' alt='Software Foundations Logo'></a></div>
<div class='booktitleinheader'><a href='index.html'>Volume 3: Verified Functional Algorithms</a></div>
<ul id='menu'>
   <li class='section_name'><a href='toc.html'>Table of Contents</a></li>
   <li class='section_name'><a href='coqindex.html'>Index</a></li>
   <li class='section_name'><a href='deps.html'>Roadmap</a></li>
</ul>
</div>

<div id="main">

<h1 class="libtitle">Maps<span class="subtitle">Total and Partial Maps</span></h1>


<div class="doc">

<div class="paragraph"> </div>

 This brief chapter defines two kinds of maps: <i>total</i> maps, which
    include a <i>default</i> element to be returned when a key being looked
    up does not exist, and <i>partial</i> maps, which return an <span class="inlinecode"><span class="id" title="var">option</span></span> to
    indicate success or failure. We'll use maps in upcoming chapters
    to verify other data structures. 
</div>

<div class="doc">
<a id="lab107"></a><h1 class="section">Total Maps</h1>

<div class="paragraph"> </div>

 The <a href="https://softwarefoundations.cis.upenn.edu/lf-current/Lists.html"><span class="inlineref">Lists</span></a> chapter in Volume 1 previously
    implemented maps with lists of key-value pairs. Here, we instead
    use functions to implement maps. Functions enable an <i>extensional</i>
    treatment of maps: two maps will be equal if they take the keys to
    the same values. We won't have to worry about issues that arise
    with lists, such as duplicate keys, or order of pairs in the list,
    etc. Proofs that use maps will therefore be simpler.

<div class="paragraph"> </div>

    Intuitively, a total map over a type <span class="inlinecode"><span class="id" title="var">A</span></span> <i>is</i> just a function that
    can be used to look up keys, yielding <span class="inlinecode"><span class="id" title="var">A</span></span>s.  For simplicity, the
    keys in our maps will be natural numbers. 
</div>
<div class="code">

<span class="id" title="keyword">Definition</span> <a id="total_map" class="idref" href="#total_map"><span class="id" title="definition">total_map</span></a> (<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Maps.html#A:1"><span class="id" title="variable">A</span></a>.<br/>
</div>

<div class="doc">
The function <span class="inlinecode"><span class="id" title="var">t_empty</span></span> yields an empty total map, given a
    default element; this map always returns the default element when
    applied to any id. 
</div>
<div class="code">

<span class="id" title="keyword">Definition</span> <a id="t_empty" class="idref" href="#t_empty"><span class="id" title="definition">t_empty</span></a> {<a id="A:2" class="idref" href="#A:2"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="v:3" class="idref" href="#v:3"><span class="id" title="binder">v</span></a> : <a class="idref" href="Maps.html#A:2"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#A:2"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Maps.html#v:3"><span class="id" title="variable">v</span></a>).<br/>
</div>

<div class="doc">
More interesting is the <span class="inlinecode"><span class="id" title="var">update</span></span> function, which (as before)
    takes a map <span class="inlinecode"><span class="id" title="var">m</span></span>, a key <span class="inlinecode"><span class="id" title="var">x</span></span>, and a value <span class="inlinecode"><span class="id" title="var">v</span></span> and returns a new map
    that takes <span class="inlinecode"><span class="id" title="var">x</span></span> to <span class="inlinecode"><span class="id" title="var">v</span></span> and takes every other key to whatever <span class="inlinecode"><span class="id" title="var">m</span></span>
    does. 
</div>
<div class="code">

<span class="id" title="keyword">Definition</span> <a id="t_update" class="idref" href="#t_update"><span class="id" title="definition">t_update</span></a> {<a id="A:4" class="idref" href="#A:4"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:5" class="idref" href="#m:5"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#A:4"><span class="id" title="variable">A</span></a>) (<a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:7" class="idref" href="#v:7"><span class="id" title="binder">v</span></a> : <a class="idref" href="Maps.html#A:4"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#A:4"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x':8" class="idref" href="#x':8"><span class="id" title="binder">x'</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="Maps.html#x:6"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e<sub>3</sub>"><span class="id" title="notation">=?</span></a> <a class="idref" href="Maps.html#x':8"><span class="id" title="variable">x'</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="Maps.html#v:7"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="Maps.html#m:5"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x':8"><span class="id" title="variable">x'</span></a>.<br/>
</div>

<div class="doc">
This definition is a nice example of higher-order programming.
    The <span class="inlinecode"><span class="id" title="var">t_update</span></span> function takes a <i>function</i> <span class="inlinecode"><span class="id" title="var">m</span></span> and yields a new
    function <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">x'</span></span> <span class="inlinecode">⇒</span> <span class="inlinecode">...</span> that behaves like the desired map.

<div class="paragraph"> </div>

    For example, we can build a map taking <span class="inlinecode"><span class="id" title="var">id</span></span>s to <span class="inlinecode"><span class="id" title="var">bool</span></span>s, where <span class="inlinecode"><span class="id" title="var">Id</span></span> <span class="inlinecode">3</span>
    is mapped to <span class="inlinecode"><span class="id" title="var">true</span></span> and every other key is mapped to <span class="inlinecode"><span class="id" title="var">false</span></span>, like
    this: 
</div>
<div class="code">

<span class="id" title="keyword">Definition</span> <a id="examplemap" class="idref" href="#examplemap"><span class="id" title="definition">examplemap</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> (<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> (<a class="idref" href="Maps.html#t_empty"><span class="id" title="definition">t_empty</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) 1 <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) 3 <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
</div>

<div class="doc">
This completes the definition of total maps.  Note that we don't
    need to define a <span class="inlinecode"><span class="id" title="var">find</span></span> operation because it is just function
    application! 
</div>
<div class="code">

<span class="id" title="keyword">Example</span> <a id="update_example1" class="idref" href="#update_example1"><span class="id" title="definition">update_example1</span></a> : <a class="idref" href="Maps.html#examplemap"><span class="id" title="definition">examplemap</span></a> 0 <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<div class="togglescript" id="proofcontrol1" onclick="toggleDisplay('proof1');toggleDisplay('proofcontrol1')"><span class="show"></span></div>
<div class="proofscript" id="proof1" onclick="toggleDisplay('proof1');toggleDisplay('proofcontrol1')">
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Example</span> <a id="update_example2" class="idref" href="#update_example2"><span class="id" title="definition">update_example2</span></a> : <a class="idref" href="Maps.html#examplemap"><span class="id" title="definition">examplemap</span></a> 1 <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<div class="togglescript" id="proofcontrol2" onclick="toggleDisplay('proof2');toggleDisplay('proofcontrol2')"><span class="show"></span></div>
<div class="proofscript" id="proof2" onclick="toggleDisplay('proof2');toggleDisplay('proofcontrol2')">
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Example</span> <a id="update_example3" class="idref" href="#update_example3"><span class="id" title="definition">update_example3</span></a> : <a class="idref" href="Maps.html#examplemap"><span class="id" title="definition">examplemap</span></a> 2 <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<div class="togglescript" id="proofcontrol3" onclick="toggleDisplay('proof3');toggleDisplay('proofcontrol3')"><span class="show"></span></div>
<div class="proofscript" id="proof3" onclick="toggleDisplay('proof3');toggleDisplay('proofcontrol3')">
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Example</span> <a id="update_example4" class="idref" href="#update_example4"><span class="id" title="definition">update_example4</span></a> : <a class="idref" href="Maps.html#examplemap"><span class="id" title="definition">examplemap</span></a> 3 <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<div class="togglescript" id="proofcontrol4" onclick="toggleDisplay('proof4');toggleDisplay('proofcontrol4')"><span class="show"></span></div>
<div class="proofscript" id="proof4" onclick="toggleDisplay('proof4');toggleDisplay('proofcontrol4')">
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div class="doc">
To use maps in later chapters, we'll need several
    fundamental facts about how they behave.  Even if you don't work
    the following exercises, make sure you thoroughly understand the
    statements of the lemmas!  (Some of the proofs require the
    <span class="inlinecode"><span class="id" title="var">functional_extensionality</span></span> axiom, which is discussed in the
    <a href="https://softwarefoundations.cis.upenn.edu/lf-current/Logic.html"><span class="inlineref">Logic</span></a> chapter.)  
<div class="paragraph"> </div>

<a id="lab108"></a><h4 class="section">Exercise: 1 star, standard (t_apply_empty)</h4>
 The empty map returns its default element for all keys: 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="t_apply_empty" class="idref" href="#t_apply_empty"><span class="id" title="lemma">t_apply_empty</span></a>:  <span class="id" title="keyword">∀</span> <a id="A:9" class="idref" href="#A:9"><span class="id" title="binder">A</span></a> <a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a> <a id="v:11" class="idref" href="#v:11"><span class="id" title="binder">v</span></a>, @<a class="idref" href="Maps.html#t_empty"><span class="id" title="definition">t_empty</span></a> <a class="idref" href="Maps.html#A:9"><span class="id" title="variable">A</span></a> <a class="idref" href="Maps.html#v:11"><span class="id" title="variable">v</span></a> <a class="idref" href="Maps.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#v:11"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

<a id="lab109"></a><h4 class="section">Exercise: 1 star, standard (t_update_eq)</h4>
 If we update a map <span class="inlinecode"><span class="id" title="var">m</span></span> at a key <span class="inlinecode"><span class="id" title="var">x</span></span> with a new value <span class="inlinecode"><span class="id" title="var">v</span></span> and then
    look up <span class="inlinecode"><span class="id" title="var">x</span></span> in the map resulting from the <span class="inlinecode"><span class="id" title="var">update</span></span>, we get back
    <span class="inlinecode"><span class="id" title="var">v</span></span>: 
</div>
<div class="code">

<span class="id" title="keyword">Lemma</span> <a id="t_update_eq" class="idref" href="#t_update_eq"><span class="id" title="lemma">t_update_eq</span></a> : <span class="id" title="keyword">∀</span> <a id="A:12" class="idref" href="#A:12"><span class="id" title="binder">A</span></a> (<a id="m:13" class="idref" href="#m:13"><span class="id" title="binder">m</span></a>: <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#A:12"><span class="id" title="variable">A</span></a>) <a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> <a id="v:15" class="idref" href="#v:15"><span class="id" title="binder">v</span></a>,<br/>
&nbsp;&nbsp;(<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:13"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v:15"><span class="id" title="variable">v</span></a>) <a class="idref" href="Maps.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#v:15"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

<a id="lab110"></a><h4 class="section">Exercise: 1 star, standard (t_update_neq)</h4>
 If we update a map <span class="inlinecode"><span class="id" title="var">m</span></span> at a key <span class="inlinecode"><span class="id" title="var">x<sub>1</sub></span></span> and then look up a
    <i>different</i> key <span class="inlinecode"><span class="id" title="var">x<sub>2</sub></span></span> in the resulting map, we get the same result
    that <span class="inlinecode"><span class="id" title="var">m</span></span> would have given: 
</div>
<div class="code">

<span class="id" title="keyword">Theorem</span> <a id="t_update_neq" class="idref" href="#t_update_neq"><span class="id" title="lemma">t_update_neq</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:16" class="idref" href="#X:16"><span class="id" title="binder">X</span></a>:<span class="id" title="keyword">Type</span>) <a id="v:17" class="idref" href="#v:17"><span class="id" title="binder">v</span></a> <a id="x<sub>1</sub>:18" class="idref" href="#x<sub>1</sub>:18"><span class="id" title="binder">x<sub>1</sub></span></a> <a id="x<sub>2</sub>:19" class="idref" href="#x<sub>2</sub>:19"><span class="id" title="binder">x<sub>2</sub></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:20" class="idref" href="#m:20"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#X:16"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#x<sub>1</sub>:18"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="Maps.html#x<sub>2</sub>:19"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:20"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:18"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="Maps.html#v:17"><span class="id" title="variable">v</span></a>) <a class="idref" href="Maps.html#x<sub>2</sub>:19"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#m:20"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>2</sub>:19"><span class="id" title="variable">x<sub>2</sub></span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

<a id="lab111"></a><h4 class="section">Exercise: 1 star, standard (t_update_shadow)</h4>
 If we update a map <span class="inlinecode"><span class="id" title="var">m</span></span> at a key <span class="inlinecode"><span class="id" title="var">x</span></span> with a value <span class="inlinecode"><span class="id" title="var">v<sub>1</sub></span></span> and then
    update again with the same key <span class="inlinecode"><span class="id" title="var">x</span></span> and another value <span class="inlinecode"><span class="id" title="var">v<sub>2</sub></span></span>, the
    resulting map behaves the same (gives the same result when applied
    to any key) as the simpler map obtained by performing just
    the second <span class="inlinecode"><span class="id" title="var">update</span></span> on <span class="inlinecode"><span class="id" title="var">m</span></span>: 
</div>
<div class="code">

<span class="id" title="keyword">Lemma</span> <a id="t_update_shadow" class="idref" href="#t_update_shadow"><span class="id" title="lemma">t_update_shadow</span></a> : <span class="id" title="keyword">∀</span> <a id="A:21" class="idref" href="#A:21"><span class="id" title="binder">A</span></a> (<a id="m:22" class="idref" href="#m:22"><span class="id" title="binder">m</span></a>: <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#A:21"><span class="id" title="variable">A</span></a>) <a id="v<sub>1</sub>:23" class="idref" href="#v<sub>1</sub>:23"><span class="id" title="binder">v<sub>1</sub></span></a> <a id="v<sub>2</sub>:24" class="idref" href="#v<sub>2</sub>:24"><span class="id" title="binder">v<sub>2</sub></span></a> <a id="x:25" class="idref" href="#x:25"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> (<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:22"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:25"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v<sub>1</sub>:23"><span class="id" title="variable">v<sub>1</sub></span></a>) <a class="idref" href="Maps.html#x:25"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:24"><span class="id" title="variable">v<sub>2</sub></span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:22"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:25"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:24"><span class="id" title="variable">v<sub>2</sub></span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

<a id="lab112"></a><h4 class="section">Exercise: 1 star, standard (t_update_same)</h4>
 If we update a map to assign key <span class="inlinecode"><span class="id" title="var">x</span></span> the same value as it already
    has in <span class="inlinecode"><span class="id" title="var">m</span></span>, then the result is equal to <span class="inlinecode"><span class="id" title="var">m</span></span>: 
</div>
<div class="code">

<span class="id" title="keyword">Theorem</span> <a id="t_update_same" class="idref" href="#t_update_same"><span class="id" title="lemma">t_update_same</span></a> : <span class="id" title="keyword">∀</span> <a id="X:26" class="idref" href="#X:26"><span class="id" title="binder">X</span></a> <a id="x:27" class="idref" href="#x:27"><span class="id" title="binder">x</span></a> (<a id="m:28" class="idref" href="#m:28"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#X:26"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:28"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:27"><span class="id" title="variable">x</span></a> (<a class="idref" href="Maps.html#m:28"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:27"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#m:28"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

<a id="lab113"></a><h4 class="section">Exercise: 1 star, standard (t_update_permute)</h4>
 If we update a map <span class="inlinecode"><span class="id" title="var">m</span></span> at two distinct keys, it doesn't matter in
    which order we do the updates. 
</div>
<div class="code">

<span class="id" title="keyword">Theorem</span> <a id="t_update_permute" class="idref" href="#t_update_permute"><span class="id" title="lemma">t_update_permute</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:29" class="idref" href="#X:29"><span class="id" title="binder">X</span></a>:<span class="id" title="keyword">Type</span>) <a id="v<sub>1</sub>:30" class="idref" href="#v<sub>1</sub>:30"><span class="id" title="binder">v<sub>1</sub></span></a> <a id="v<sub>2</sub>:31" class="idref" href="#v<sub>2</sub>:31"><span class="id" title="binder">v<sub>2</sub></span></a> <a id="x<sub>1</sub>:32" class="idref" href="#x<sub>1</sub>:32"><span class="id" title="binder">x<sub>1</sub></span></a> <a id="x<sub>2</sub>:33" class="idref" href="#x<sub>2</sub>:33"><span class="id" title="binder">x<sub>2</sub></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:34" class="idref" href="#m:34"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> <a class="idref" href="Maps.html#X:29"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#x<sub>2</sub>:33"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:32"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> (<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:34"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>2</sub>:33"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:31"><span class="id" title="variable">v<sub>2</sub></span></a>) <a class="idref" href="Maps.html#x<sub>1</sub>:32"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="Maps.html#v<sub>1</sub>:30"><span class="id" title="variable">v<sub>1</sub></span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> (<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:34"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:32"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="Maps.html#v<sub>1</sub>:30"><span class="id" title="variable">v<sub>1</sub></span></a>) <a class="idref" href="Maps.html#x<sub>2</sub>:33"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:31"><span class="id" title="variable">v<sub>2</sub></span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>


<div class="doc">
<a id="lab114"></a><h1 class="section">Partial Maps</h1>

<div class="paragraph"> </div>

 A partial map with elements of type <span class="inlinecode"><span class="id" title="var">A</span></span> is simply a total map with
    elements of type <span class="inlinecode"><span class="id" title="var">option</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> and default element <span class="inlinecode"><span class="id" title="var">None</span></span>. 
</div>
<div class="code">

<span class="id" title="keyword">Definition</span> <a id="partial_map" class="idref" href="#partial_map"><span class="id" title="definition">partial_map</span></a> (<a id="A:35" class="idref" href="#A:35"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) := <a class="idref" href="Maps.html#total_map"><span class="id" title="definition">total_map</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Maps.html#A:35"><span class="id" title="variable">A</span></a>).<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Definition</span> <a id="empty" class="idref" href="#empty"><span class="id" title="definition">empty</span></a> {<a id="A:36" class="idref" href="#A:36"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#A:36"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#t_empty"><span class="id" title="definition">t_empty</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Definition</span> <a id="update" class="idref" href="#update"><span class="id" title="definition">update</span></a> {<a id="A:37" class="idref" href="#A:37"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:38" class="idref" href="#m:38"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#A:37"><span class="id" title="variable">A</span></a>) (<a id="x:39" class="idref" href="#x:39"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="v:40" class="idref" href="#v:40"><span class="id" title="binder">v</span></a> : <a class="idref" href="Maps.html#A:37"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#A:37"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#t_update"><span class="id" title="definition">t_update</span></a> <a class="idref" href="Maps.html#m:38"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:39"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Maps.html#v:40"><span class="id" title="variable">v</span></a>).<br/>
</div>

<div class="doc">
We can easily lift all of the basic lemmas about total maps to
    partial maps.  
</div>
<div class="code">

<span class="id" title="keyword">Lemma</span> <a id="apply_empty" class="idref" href="#apply_empty"><span class="id" title="lemma">apply_empty</span></a> : <span class="id" title="keyword">∀</span> <a id="A:41" class="idref" href="#A:41"><span class="id" title="binder">A</span></a> <a id="x:42" class="idref" href="#x:42"><span class="id" title="binder">x</span></a>, @<a class="idref" href="Maps.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="Maps.html#A:41"><span class="id" title="variable">A</span></a> <a class="idref" href="Maps.html#x:42"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<div class="togglescript" id="proofcontrol5" onclick="toggleDisplay('proof5');toggleDisplay('proofcontrol5')"><span class="show"></span></div>
<div class="proofscript" id="proof5" onclick="toggleDisplay('proof5');toggleDisplay('proofcontrol5')">
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Maps.html#empty"><span class="id" title="definition">empty</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Maps.html#t_apply_empty"><span class="id" title="axiom">t_apply_empty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_eq" class="idref" href="#update_eq"><span class="id" title="lemma">update_eq</span></a> : <span class="id" title="keyword">∀</span> <a id="A:43" class="idref" href="#A:43"><span class="id" title="binder">A</span></a> (<a id="m:44" class="idref" href="#m:44"><span class="id" title="binder">m</span></a>: <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#A:43"><span class="id" title="variable">A</span></a>) <a id="x:45" class="idref" href="#x:45"><span class="id" title="binder">x</span></a> <a id="v:46" class="idref" href="#v:46"><span class="id" title="binder">v</span></a>,<br/>
&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:44"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:45"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v:46"><span class="id" title="variable">v</span></a>) <a class="idref" href="Maps.html#x:45"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Maps.html#v:46"><span class="id" title="variable">v</span></a>.<br/>
<div class="togglescript" id="proofcontrol6" onclick="toggleDisplay('proof6');toggleDisplay('proofcontrol6')"><span class="show"></span></div>
<div class="proofscript" id="proof6" onclick="toggleDisplay('proof6');toggleDisplay('proofcontrol6')">
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Maps.html#t_update_eq"><span class="id" title="axiom">t_update_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="update_neq" class="idref" href="#update_neq"><span class="id" title="lemma">update_neq</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:47" class="idref" href="#X:47"><span class="id" title="binder">X</span></a>:<span class="id" title="keyword">Type</span>) <a id="v:48" class="idref" href="#v:48"><span class="id" title="binder">v</span></a> <a id="x<sub>1</sub>:49" class="idref" href="#x<sub>1</sub>:49"><span class="id" title="binder">x<sub>1</sub></span></a> <a id="x<sub>2</sub>:50" class="idref" href="#x<sub>2</sub>:50"><span class="id" title="binder">x<sub>2</sub></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:51" class="idref" href="#m:51"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#X:47"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#x<sub>2</sub>:50"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:49"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:51"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>2</sub>:50"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="Maps.html#v:48"><span class="id" title="variable">v</span></a>) <a class="idref" href="Maps.html#x<sub>1</sub>:49"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#m:51"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:49"><span class="id" title="variable">x<sub>1</sub></span></a>.<br/>
<div class="togglescript" id="proofcontrol7" onclick="toggleDisplay('proof7');toggleDisplay('proofcontrol7')"><span class="show"></span></div>
<div class="proofscript" id="proof7" onclick="toggleDisplay('proof7');toggleDisplay('proofcontrol7')">
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">v</span> <span class="id" title="var">x<sub>1</sub></span> <span class="id" title="var">x<sub>2</sub></span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Maps.html#t_update_neq"><span class="id" title="axiom">t_update_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_shadow" class="idref" href="#update_shadow"><span class="id" title="lemma">update_shadow</span></a> : <span class="id" title="keyword">∀</span> <a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> (<a id="m:53" class="idref" href="#m:53"><span class="id" title="binder">m</span></a>: <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#A:52"><span class="id" title="variable">A</span></a>) <a id="v<sub>1</sub>:54" class="idref" href="#v<sub>1</sub>:54"><span class="id" title="binder">v<sub>1</sub></span></a> <a id="v<sub>2</sub>:55" class="idref" href="#v<sub>2</sub>:55"><span class="id" title="binder">v<sub>2</sub></span></a> <a id="x:56" class="idref" href="#x:56"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> (<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:53"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:56"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v<sub>1</sub>:54"><span class="id" title="variable">v<sub>1</sub></span></a>) <a class="idref" href="Maps.html#x:56"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:55"><span class="id" title="variable">v<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:53"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:56"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:55"><span class="id" title="variable">v<sub>2</sub></span></a>.<br/>
<div class="togglescript" id="proofcontrol8" onclick="toggleDisplay('proof8');toggleDisplay('proofcontrol8')"><span class="show"></span></div>
<div class="proofscript" id="proof8" onclick="toggleDisplay('proof8');toggleDisplay('proofcontrol8')">
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">m</span> <span class="id" title="var">v<sub>1</sub></span> <span class="id" title="var">v<sub>2</sub></span> <span class="id" title="var">x<sub>1</sub></span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Maps.html#t_update_shadow"><span class="id" title="axiom">t_update_shadow</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="update_same" class="idref" href="#update_same"><span class="id" title="lemma">update_same</span></a> : <span class="id" title="keyword">∀</span> <a id="X:57" class="idref" href="#X:57"><span class="id" title="binder">X</span></a> <a id="v:58" class="idref" href="#v:58"><span class="id" title="binder">v</span></a> <a id="x:59" class="idref" href="#x:59"><span class="id" title="binder">x</span></a> (<a id="m:60" class="idref" href="#m:60"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#X:57"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#m:60"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:59"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Maps.html#v:58"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:60"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x:59"><span class="id" title="variable">x</span></a> <a class="idref" href="Maps.html#v:58"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Maps.html#m:60"><span class="id" title="variable">m</span></a>.<br/>
<div class="togglescript" id="proofcontrol9" onclick="toggleDisplay('proof9');toggleDisplay('proofcontrol9')"><span class="show"></span></div>
<div class="proofscript" id="proof9" onclick="toggleDisplay('proof9');toggleDisplay('proofcontrol9')">
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Maps.html#t_update_same"><span class="id" title="axiom">t_update_same</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="update_permute" class="idref" href="#update_permute"><span class="id" title="lemma">update_permute</span></a> : <span class="id" title="keyword">∀</span> (<a id="X:61" class="idref" href="#X:61"><span class="id" title="binder">X</span></a>:<span class="id" title="keyword">Type</span>) <a id="v<sub>1</sub>:62" class="idref" href="#v<sub>1</sub>:62"><span class="id" title="binder">v<sub>1</sub></span></a> <a id="v<sub>2</sub>:63" class="idref" href="#v<sub>2</sub>:63"><span class="id" title="binder">v<sub>2</sub></span></a> <a id="x<sub>1</sub>:64" class="idref" href="#x<sub>1</sub>:64"><span class="id" title="binder">x<sub>1</sub></span></a> <a id="x<sub>2</sub>:65" class="idref" href="#x<sub>2</sub>:65"><span class="id" title="binder">x<sub>2</sub></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:66" class="idref" href="#m:66"><span class="id" title="binder">m</span></a> : <a class="idref" href="Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="Maps.html#X:61"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Maps.html#x<sub>2</sub>:65"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:64"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> (<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:66"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>2</sub>:65"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:63"><span class="id" title="variable">v<sub>2</sub></span></a>) <a class="idref" href="Maps.html#x<sub>1</sub>:64"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="Maps.html#v<sub>1</sub>:62"><span class="id" title="variable">v<sub>1</sub></span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> (<a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="Maps.html#m:66"><span class="id" title="variable">m</span></a> <a class="idref" href="Maps.html#x<sub>1</sub>:64"><span class="id" title="variable">x<sub>1</sub></span></a> <a class="idref" href="Maps.html#v<sub>1</sub>:62"><span class="id" title="variable">v<sub>1</sub></span></a>) <a class="idref" href="Maps.html#x<sub>2</sub>:65"><span class="id" title="variable">x<sub>2</sub></span></a> <a class="idref" href="Maps.html#v<sub>2</sub>:63"><span class="id" title="variable">v<sub>2</sub></span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<div class="togglescript" id="proofcontrol10" onclick="toggleDisplay('proof10');toggleDisplay('proofcontrol10')"><span class="show"></span></div>
<div class="proofscript" id="proof10" onclick="toggleDisplay('proof10');toggleDisplay('proofcontrol10')">
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">v<sub>1</sub></span> <span class="id" title="var">v<sub>2</sub></span> <span class="id" title="var">x<sub>1</sub></span> <span class="id" title="var">x<sub>2</sub></span> <span class="id" title="var">m</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" title="definition">update</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Maps.html#t_update_permute"><span class="id" title="axiom">t_update_permute</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="comment">(*&nbsp;2023-10-18&nbsp;22:55&nbsp;*)</span><br/>
</div>
</div>

<div id="footer">
<hr/><a href="coqindex.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>